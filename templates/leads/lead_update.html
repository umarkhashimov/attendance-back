{% extends 'layout/base.html' %}
{% load crispy_forms_tags %}
{% block title %}
    <title>Панель Управления</title>
{% endblock %}
{% block content %}
    {% include 'layout/navbar.html' %}

    <div class="container pt-2">
        <div class="bg-light rounded py-3 mt-3 px-2 border">
            <p class="text-black ms-1">Редактировать Лид № {{ lead.id }}</p>
            <hr class="table-group-divider"/>
            <table class="table bottom-1 border bg-white enrollment-info-table table-hover">
                        <tr>
                            <td class="w-25">Имя:</td>
                            <td class="w-auto">{{ lead.student.first_name }}</td>
                        </tr>
                        <tr>
                            <td>Фамилия:</td>
                            <td>{{ lead.student.last_name }}</td>
                        </tr>
                        <tr>
                            <td>Номер т. родителей:</td>
                            <td class="debt-students-phone-numbers"><span type="button"
                                                                          copy="{{ lead.student.phone_number }}"
                                                                          onclick="navigator.clipboard.writeText(this.getAttribute('copy')), this.classList.add('copied'), setTimeout(()=>{this.classList.remove('copied')}, 1000)">{{ lead.student.phone_number }}</span>
                            </td>
                        </tr>
                        <tr>
                            <td>Номер т. ученика:</td>
                            <td class="debt-students-phone-numbers"><span type="button"
                                                                          copy="{{ lead.student.additional_number|default_if_none:"---" }}"
                                                                          {% if lead.student.additional_number %}onclick="navigator.clipboard.writeText(this.getAttribute('copy')), this.classList.add('copied'), setTimeout(()=>{this.classList.remove('copied')}, 1000)"{% endif %}>{{ lead.student.additional_number|default_if_none:"---" }}</span>
                            </td>
                        </tr>
                        <tr>
                            <td>Заметка ученика:</td>
                            <td>{{ lead.student.notes|default:'---' }}</td>
                        </tr>
                    </table>
            <hr class="table-group-divider"/>

            {% comment %} {{ form.as_p }} {% endcomment %}
            <form method="post">
                {% csrf_token %}
               <div class="form-floating my-1">
                        {{ form.subject }}
                        <label aria-required="{{ form.subject.required }}" {{ form.subject.required }}
                               for="{{ form.subject.id_for_label }}">{{ form.subject.label }}</label>
                    </div>
                    <div class="form-floating my-1">
                        {{ form.teacher }}
                        <label aria-required="{{ form.teacher.required }}" {{ form.teacher.required }}
                               for="{{ form.teacher.id_for_label }}">{{ form.teacher.label }}</label>
                    </div>
                    <div class="form-floating my-1">
                        {{ form.weekdays }}
                        <label aria-required="{{ form.weekdays.required }}" {{ form.weekdays.required }}
                               for="{{ form.weekdays.id_for_label }}">{{ form.weekdays.label }}</label>
                    </div>
                    <div class="form-floating my-1">
                        {{ form.lesson_time }}
                        <label aria-required="{{ form.lesson_time.required }}" {{ form.lesson_time.required }}
                               for="{{ form.lesson_time.id_for_label }}">{{ form.lesson_time.label }}</label>
                    </div>
                    <div class="form-floating my-1">
                        {{ form.note }}
                        <label aria-required="{{ form.note.required }}" {{ form.note.required }}
                               for="{{ form.note.id_for_label }}">{{ form.note.label }}</label>
                    </div>
                    <div class="form-floating my-1">
                        {{ form.arrival_date }}
                        <label aria-required="{{ form.arrival_date.required }}" {{ form.arrival_date.required }}
                               for="{{ form.arrival_date.id_for_label }}">{{ form.arrival_date.label }}</label>
                    </div>
                <div class="d-flex justify-content-end flex-column flex-md-row">
                    <button type="submit" class="btn btn-success">Сохранить</button>
                </div>
            </form>
        </div>
    </div>
{% endblock %}
{% block custom_js %}
    <script defer>
        flatpickr('#LessonTimePicker', {
            enableTime: true,
            noCalendar: true,
            dateFormat: 'H:i',
            time_24hr: true
        })

        flatpickr('#datePicker', {
            dateFormat: "Y-m-d",
        })
    </script>
{% endblock %}

