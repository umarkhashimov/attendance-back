{% block content %}
    <div class="table-responsive" style="max-height: calc(100vh - 100px);">
        <table class="table table-striped table-bordered w-100 attendance-record-table table-hover">
            <thead class="sticky-top">
            <tr>
                <th class="text-center border border-secondary-subtle">Имя студента</th>
                {% for session in sessions %}
                    <td class="text-center border border-secondary-subtle date-cell px-1 {% if session.status == False %} bg-danger bg-opacity-50 {% endif %}">
                        <span>{{ session.date|date:"d-M" }}</span><br><span>{{ session.date|date:"Y" }}</span>
                    </td>
                {% endfor %}
            </tr>
            </thead>
            <tbody>
            {% for record in attendance_data %}
                <tr class="">
                    <td class="px-2 py-1 border border-secondary-subtle status-cell position-sticky ">{{ record.student }}</td>
                    {% for info in record.attendance %}
                        <td class="border border-secondary-subtle text-center status-cell {% if info.status == 1 %} bg-success bg-opacity-75 {% elif info.status == 0 %} bg-danger bg-opacity-75 {% elif info.status == 2 %} bg-warning bg-opacity-50 {% elif info.status == 3 %} bg-info bg-opacity-50  {% elif info.status is None %} bg-secondary bg-opacity-50 {% endif %}">
                            {% if info.status == 1 or info.status == 2 %}
                                <span title="оценка за дом.зад./посещение"
                                      class="text-black">{{ info.homework_grade|default:"-" }}/{{ info.participation_grade|default:"-" }}</span>
                            {% elif info.status == 0 %}
                                <span class="text-dark"><i
                                        class="bi bi-x"></i></span>
                            {% elif info.status == None %}
                                <i class="bi bi-question"></i>
                            {% endif %}
                        </td>

                    {% endfor %}
                </tr>
            {% empty %}
                <tr>
                    <td colspan="{{ sessions|length|add:1 }}" class="text-center">Нет записей</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

{% endblock %}
